
Это консольное приложение с сервером (будущая виртуальная машина, однако здесь пока нет ВМ -- все локально) и клиентом (хост).
Сервер, получив запрос на соединение от клиента, порождает дочерний процесс (CMD.EXE),и в цикле вбиваем команды на хосте(клиенте),
они отправляются через сокет на сервер, а вывод из сервера хосту(клиенту).

Сервер не останавливается, когда теряется/прекращается соединение с клиентом 
При этом порождается новый дочерний процесс CMD.exe для каждого соединения.

Запускать сначала сервер:
client_server_with_child_process.exe srv
Потом клиент (с опцией cli)

! Don't forget multibyte!